(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){"use strict";a.d(t,"a",function(){return c}),a.d(t,"f",function(){return o}),a.d(t,"b",function(){return i}),a.d(t,"e",function(){return s}),a.d(t,"d",function(){return u}),a.d(t,"c",function(){return m});var n=a(9),r=a(1),c=!1,l="Conduit",o=window.localStorage.getItem("jwt");function i(){return n.a.Tags.getAll().then(function(e){var t=e.tags.map(function(e){return e.toLowerCase()});return Object(r.c)("tags",t),t}).finally(function(){})}function s(){Object(r.c)("token",o),o||(window.localStorage.removeItem("jwt"),o=void 0)}function u(){Object(r.c)("appName",l)}function m(){c=!0,Object(r.c)("appLoaded",c)}o||window.localStorage.removeItem("jwt")},13:function(e,t,a){"use strict";a.d(t,"g",function(){return s}),a.d(t,"e",function(){return u}),a.d(t,"f",function(){return m}),a.d(t,"d",function(){return f}),a.d(t,"a",function(){return d}),a.d(t,"c",function(){return p}),a.d(t,"b",function(){return h});var n=a(9),r=a(17),c=a(11),l=a(1),o=void 0,i={username:"",email:"",password:""};function s(e){i.username=e,Object(l.c)("currentUser",i)}function u(e){i.email=e,Object(l.c)("currentUser",i)}function m(e){i.password=e,Object(l.c)("currentUser",i)}function f(){i.username="",i.email="",i.password="",Object(l.c)("currentUser",i)}function d(){return!0,o=void 0,n.a.Auth.login(i.email,i.password).then(function(e){var t=e.user;c.e(t.token),Object(l.c)("currentUser",t)}).then(function(){return r.b()}).catch(function(e){throw o=e.response&&e.response.body&&e.response.body.errors,Object(l.c)("lerrors",o),e}).finally(function(){!1})}function p(){return!0,o=void 0,n.a.Auth.register(i.username,i.email,i.password).then(function(e){var t=e.user;c.e(t.token),Object(l.c)("currentUser",t)}).then(function(){return r.b()}).catch(function(e){throw o=e.response&&e.response.body&&e.response.body.errors,Object(l.c)("rerrors",o),e}).finally(function(){!1})}function h(){return c.e(void 0),r.a(),Promise.resolve()}},17:function(e,t,a){"use strict";a.d(t,"b",function(){return l}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return i});var n,r=a(9),c=a(1);function l(){return!0,r.a.Auth.current().then(function(e){var t=e.user;n=t,Object(c.c)("currentUser",n)}).finally(function(){!1})}function o(e){return!0,r.a.Auth.save(e).then(function(e){var t=e.user;n=t,Object(c.c)("currentUser",n)}).finally(function(){!1})}function i(){n=void 0,Object(c.c)("currentUser",n)}},54:function(e,t,a){e.exports=a(96)},9:function(e,t,a){"use strict";(function(e){var n=a(49),r=a.n(n),c=a(50),l=a.n(c),o=a(11),i=a(13),s=r()(l.a,e.Promise),u="https://conduit.productionready.io/api",m=encodeURIComponent,f=function(e){return e&&e.response&&401===e.response.status&&Object(i.b)(),e},d=function(e){return e.body},p=function(e){o.f&&e.set("authorization","Token ".concat(o.f))},h=function(e){return s.del("".concat(u).concat(e)).use(p).end(f).then(d)},b=function(e){return s.get("".concat(u).concat(e)).use(p).end(f).then(d)},g=function(e,t){return s.put("".concat(u).concat(e),t).use(p).end(f).then(d)},v=function(e,t){return s.post("".concat(u).concat(e),t).use(p).end(f).then(d)},E={current:function(){return b("/user")},login:function(e,t){return v("/users/login",{user:{email:e,password:t}})},register:function(e,t,a){return v("/users",{user:{username:e,email:t,password:a}})},save:function(e){return g("/user",{user:e})}},j={getAll:function(){return b("/tags")}},O=function(e,t){return"limit=".concat(e,"&offset=").concat(t?t*e:0)},N=function(e){return Object.assign({},e,{slug:void 0})},y={all:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return b("/articles?".concat(O(t,e)))},byAuthor:function(e,t,a){return b("/articles?author=".concat(m(e),"&").concat(O(5,t)))},byTag:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return b("/articles?tag=".concat(m(e),"&").concat(O(a,t)))},del:function(e){return h("/articles/".concat(e))},favorite:function(e){return v("/articles/".concat(e,"/favorite"))},favoritedBy:function(e,t){return b("/articles?favorited=".concat(m(e),"&").concat(O(5,t)))},feed:function(){return b("/articles/feed?limit=10&offset=0")},get:function(e){return b("/articles/".concat(e))},unfavorite:function(e){return h("/articles/".concat(e,"/favorite"))},update:function(e){return g("/articles/".concat(e.slug),{article:N(e)})},create:function(e){return v("/articles",{article:e})}},w={create:function(e,t){return v("/articles/".concat(e,"/comments"),{comment:t})},delete:function(e,t){return h("/articles/".concat(e,"/comments/").concat(t))},forArticle:function(e){return b("/articles/".concat(e,"/comments"))}},C={follow:function(e){return v("/profiles/".concat(e,"/follow"))},get:function(e){return b("/profiles/".concat(e))},unfollow:function(e){return h("/profiles/".concat(e,"/follow"))}};t.a={Articles:y,Auth:E,Comments:w,Profile:C,Tags:j}}).call(this,a(21))},96:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getArticle",function(){return Z}),a.d(n,"setPage",function(){return Q}),a.d(n,"setPredicate",function(){return X}),a.d(n,"loadArticles",function(){return $}),a.d(n,"loadArticle",function(){return ee}),a.d(n,"makeFavorite",function(){return te}),a.d(n,"unmakeFavorite",function(){return ae}),a.d(n,"createArticle",function(){return ne}),a.d(n,"updateArticle",function(){return re}),a.d(n,"deleteArticle",function(){return ce});var r={};a.r(r),a.d(r,"App",function(){return et}),a.d(r,"Header",function(){return tt}),a.d(r,"Home",function(){return at}),a.d(r,"Login",function(){return nt}),a.d(r,"Register",function(){return rt}),a.d(r,"Profile",function(){return ct}),a.d(r,"Article",function(){return lt}),a.d(r,"Settings",function(){return ot}),a.d(r,"SettingsForm",function(){return it}),a.d(r,"MainView",function(){return st}),a.d(r,"Editor",function(){return ut}),a.d(r,"CommentInput",function(){return mt}),a.d(r,"PrivateRoute",function(){return ft});var c=a(47),l=a.n(c),o=a(0),i=a.n(o),s=a(2),u=a(48),m=a.n(u),f=a(4),d=a(5),p=a(7),h=a(6),b=a(10),g=a(8),v=a(1),E=a(17),j=a(11),O=function(e){return e.currentUser?null:i.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.b,{to:"/",className:"nav-link"},"Home")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.b,{to:"/login",className:"nav-link"},"Sign in")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.b,{to:"/register",className:"nav-link"},"Sign up")))},N=function(e){return e.currentUser?i.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.b,{to:"/",className:"nav-link"},"Home")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.b,{to:"/editor",className:"nav-link"},i.a.createElement("i",{className:"ion-compose"}),"\xa0New Post")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.b,{to:"/settings",className:"nav-link"},i.a.createElement("i",{className:"ion-gear-a"}),"\xa0Settings")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.b,{to:"/@".concat(e.currentUser.username),className:"nav-link"},i.a.createElement("img",{src:e.currentUser.image,className:"user-pic",alt:""}),e.currentUser.username))):null},y=function(e){function t(e){var a;return Object(f.a)(this,t),a=Object(p.a)(this,Object(h.a)(t).call(this,e)),Object(v.a)(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.appName,t=this.currentUser;return i.a.createElement("nav",{className:"navbar navbar-light"},i.a.createElement("div",{className:"container"},i.a.createElement(s.b,{to:"/",className:"navbar-brand"},e.toLowerCase()),i.a.createElement(O,{currentUser:t}),i.a.createElement(N,{currentUser:t})))}}]),t}(i.a.Component),w=a(18),C=function(e){var t=e.article;return e.canModify?i.a.createElement("span",null,i.a.createElement(s.b,{to:"/editor/".concat(t.slug),className:"btn btn-outline-secondary btn-sm"},i.a.createElement("i",{className:"ion-edit"})," Edit Article"),i.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:function(){return e.onDelete(t.slug)}},i.a.createElement("i",{className:"ion-trash-a"})," Delete Article")):i.a.createElement("span",null)},k=function(e){var t=e.article;return i.a.createElement("div",{className:"article-meta"},i.a.createElement(s.b,{to:"/@".concat(t.author.username)},i.a.createElement("img",{src:t.author.image,alt:""})),i.a.createElement("div",{className:"info"},i.a.createElement(s.b,{to:"/@".concat(t.author.username),className:"author"},t.author.username),i.a.createElement("span",{className:"date"},new Date(t.createdAt).toDateString())),i.a.createElement(C,{canModify:e.canModify,article:t,onDelete:e.onDelete}))},U=a(9),P=void 0,A=void 0,S=[];function x(){!0,P=void 0,Object(v.c)("commentErrors",P);var e=Object(v.b)("slug");return U.a.Comments.forArticle(e).then(function(e){var t=e.comments;t=t,Object(v.c)("comments",t)}).catch(function(e){throw P=e.response&&e.response.body&&e.response.body.errors,Object(v.c)("commentErrors",P),e}).finally(function(){!1})}var D,T=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={body:""},Object(v.a)(Object(b.a)(e)),e.handleBodyChange=function(t){e.setState({body:t.target.value})},e.createComment=function(t){var a;t.preventDefault(),(a={body:e.state.body},!0,U.a.Comments.create(A,a).then(function(){return x()}).finally(function(){!1})).then(function(){return e.setState({body:""})})},e}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.currentUser,t=this.isCreatingComment;return i.a.createElement("form",{className:"card comment-form",onSubmit:this.createComment},i.a.createElement("div",{className:"card-block"},i.a.createElement("textarea",{className:"form-control",placeholder:"Write a comment...",value:this.state.body,disabled:t,onChange:this.handleBodyChange,rows:"3"})),i.a.createElement("div",{className:"card-footer"},i.a.createElement("img",{src:e.image,className:"comment-author-img",alt:""}),i.a.createElement("button",{className:"btn btn-sm btn-primary",type:"submit"},"Post Comment")))}}]),t}(i.a.Component),L=function(e){return e.show?i.a.createElement("span",{className:"mod-options"},i.a.createElement("i",{className:"ion-trash-a",onClick:function(){return e.onDelete(e.commentId)}})):null},F=function(e){var t=e.comment,a=e.currentUser&&e.currentUser.username===t.author.username;return i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-block"},i.a.createElement("p",{className:"card-text"},t.body)),i.a.createElement("div",{className:"card-footer"},i.a.createElement(s.b,{to:"/@".concat(t.author.username),className:"comment-author"},i.a.createElement("img",{src:t.author.image,className:"comment-author-img",alt:""})),"\xa0",i.a.createElement(s.b,{to:"/@".concat(t.author.username),className:"comment-author"},t.author.username),i.a.createElement("span",{className:"date-posted"},new Date(t.createdAt).toDateString()),i.a.createElement(L,{show:a,slug:e.slug,commentId:t.id,onDelete:e.onDelete})))},I=function(e){return i.a.createElement("div",null,e.comments.map(function(t){return i.a.createElement(F,{comment:t,currentUser:e.currentUser,slug:e.slug,key:t.id,onDelete:e.onDelete})}))},M=function(e){return e.currentUser?i.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},i.a.createElement("div",null,i.a.createElement("list-errors",{errors:e.errors}),i.a.createElement(T,{slug:e.slug,currentUser:e.currentUser})),i.a.createElement(I,{comments:e.comments,slug:e.slug,currentUser:e.currentUser,onDelete:e.onDelete})):i.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},i.a.createElement("p",null,i.a.createElement(s.b,{to:"/login"},"Sign in"),"\xa0or\xa0",i.a.createElement(s.b,{to:"/register"},"sign up"),"\xa0to add comments on this article."),i.a.createElement(I,{comments:e.comments,slug:e.slug,currentUser:e.currentUser,onDelete:e.onDelete}))},R={display:"flex",justifyContent:"center"},B={display:"inline-block",margin:"20px auto",borderRadius:"4px",padding:"8px 15px",color:"rgb(240, 45, 45)",fontWeight:"bold",backgroundColor:"rgba(240, 45, 45, 0.1)"},W=function(e){function t(){return Object(f.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{style:R},i.a.createElement("div",{style:B},this.props.message))}}]),t}(i.a.Component),H={borderRadius:"50%",width:"40px",height:"40px",margin:"90px auto",position:"relative",borderTop:"3px solid rgba(0, 0, 0, 0.1)",borderRight:"3px solid rgba(0, 0, 0, 0.1)",borderBottom:"3px solid rgba(0, 0, 0, 0.1)",borderLeft:"3px solid #818a91",transform:"translateZ(0)",animation:"loading-spinner 0.5s infinite linear"},J=function(e){function t(){return Object(f.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"loading-spinner",style:H},i.a.createElement("style",null,"\n        @keyframes loading-spinner {\n          0% { transform : rotate(0deg); }\n          100% { transform : rotate(360deg); }\n        }\n        "))}}]),t}(i.a.Component),K=a(53),q=a.n(K),z=10,Y=0,_=0,G=new Map,V={};function Z(e){var t=G.get(e);return t}function Q(e){Y=e,Object(v.c)("page",Y)}function X(e){JSON.stringify(V)!==JSON.stringify(e)&&(G.clear(),Y=0,Object(v.c)("page",Y),V=e)}function $(){return!0,(V.myFeed?U.a.Articles.feed(Y,z):V.favoritedBy?U.a.Articles.favoritedBy(V.favoritedBy,Y,z):V.tag?U.a.Articles.byTag(V.tag,Y,z):V.author?U.a.Articles.byAuthor(V.author,Y,z):U.a.Articles.all(Y,z,V)).then(function(e){var t=e.articles,a=e.articlesCount;G.clear(),t.forEach(function(e){return G.set(e.slug,e)}),_=Math.ceil(a/z),Object(v.c)("articles",t),Object(v.c)("totalPagesCount",_)}).finally(function(){!1})}function ee(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).acceptCached,a=void 0!==t&&t;if(Object(v.c)("slug",e),a){var n=Z(e);if(n)return Promise.resolve(n)}var r=!0;return Object(v.c)("isArticleLoading",r),U.a.Articles.get(e).then(function(e){var t=e.article;return G.set(t.slug,t),Object(v.c)("article",t),t}).finally(function(){r=!1,Object(v.c)("isArticleLoading",r)})}function te(e){var t=Z(e);return t&&!t.favorited?(t.favorited=!0,t.favoritesCount++,U.a.Articles.favorite(e).catch(function(e){throw t.favorited=!1,t.favoritesCount--,e})):Promise.resolve()}function ae(e){var t=Z(e);return t&&t.favorited?(t.favorited=!1,t.favoritesCount--,U.a.Articles.unfavorite(e).catch(function(e){throw t.favorited=!0,t.favoritesCount++,e})):Promise.resolve()}function ne(e){return U.a.Articles.create(e).then(function(e){var t=e.article;return G.set(t.slug,t),t})}function re(e){return U.a.Articles.update(e).then(function(e){var t=e.article;return G.set(t.slug,t),t})}function ce(e){return G.delete(e),U.a.Articles.del(e).catch(function(e){throw $(),e})}var le,oe=Object(w.f)(D=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleDeleteArticle=function(e){ce(e).then(function(){return a.props.history.replace("/")})},a.handleDeleteComment=function(e){!function(e){var t=S.findIndex(function(t){return t.id===e});t>-1&&S.splice(t,1),U.a.Comments.delete(A,e).catch(function(e){throw x(),e})}(e)},Object(v.a)(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,t=this.props.match.params.id;ee(t,{acceptCached:!0}),A!==(e=t)&&(S=[],Object(v.c)("comments",S),A=e),x()}},{key:"render",value:function(){var e=this.props.match.params.id,t=this.currentUser,a=this.comments,n=this.commentErrors,r=this.isArticleLoading,c=Z(e);if(r)return i.a.createElement(J,null);if(!c)return i.a.createElement(W,{message:"Can't load article"});var l={__html:q()(c.body,{sanitize:!0})},o=t&&t.username===c.author.username;return i.a.createElement("div",{className:"article-page"},i.a.createElement("div",{className:"banner"},i.a.createElement("div",{className:"container"},i.a.createElement("h1",null,c.title),i.a.createElement(k,{article:c,canModify:o,onDelete:this.handleDeleteArticle}))),i.a.createElement("div",{className:"container page"},i.a.createElement("div",{className:"row article-content"},i.a.createElement("div",{className:"col-xs-12"},i.a.createElement("div",{dangerouslySetInnerHTML:l}),i.a.createElement("ul",{className:"tag-list"},c.tagList.map(function(e){return i.a.createElement("li",{className:"tag-default tag-pill tag-outline",key:e},e)})))),i.a.createElement("hr",null),i.a.createElement("div",{className:"article-actions"}),i.a.createElement("div",{className:"row"},i.a.createElement(M,{comments:a,errors:n,slug:e,currentUser:t,onDelete:this.handleDeleteComment}))))}}]),t}(i.a.Component))||D,ie=function(e){function t(){return Object(f.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.errors;return e?i.a.createElement("ul",{className:"error-messages"},Object.keys(e).map(function(t){return i.a.createElement("li",{key:t},t," ",e[t])})):null}}]),t}(i.a.Component),se=void 0,ue=[];function me(e){se!==e&&(de(),se=e)}function fe(){return se?(!0,ee(se,{acceptCached:!0}).then(function(e){if(!e)throw new Error("Can't load original article");ue=e.tagList,Object(v.c)("title",e.title),Object(v.c)("description",e.description),Object(v.c)("body",e.body),Object(v.c)("tagList",ue)}).finally(function(){!1})):Promise.resolve()}function de(){ue=[],Object(v.c)("title",""),Object(v.c)("description",""),Object(v.c)("body",""),Object(v.c)("tagList",[])}var pe,he,be,ge,ve=Object(w.f)(le=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeTitle=function(e){return t=e.target.value,void Object(v.c)("title",t);var t},a.changeDescription=function(e){return t=e.target.value,void Object(v.c)("description",t);var t},a.changeBody=function(e){return t=e.target.value,void Object(v.c)("body",t);var t},a.changeTagInput=function(e){return a.setState({tagInput:e.target.value})},a.handleTagInputKeyDown=function(e){switch(e.keyCode){case 13:case 9:case 188:9!==e.keyCode&&e.preventDefault(),a.handleAddTag()}},a.handleAddTag=function(){var e;a.state.tagInput&&(e=a.state.tagInput.trim(),ue.includes(e)||(ue.push(e),Object(v.c)("tagList",ue)),a.setState({tagInput:""}))},a.handleRemoveTag=function(e){a.state.inProgressRemoveTag||function(e){ue=ue.filter(function(t){return t!==e}),Object(v.c)("tagList",ue)}(e)},a.submitForm=function(e){e.preventDefault(),function(){!0,void 0;var e={title:Object(v.b)("title"),description:Object(v.b)("description"),body:Object(v.b)("body"),tagList:Object(v.b)("tagList"),slug:se};return(se?re(e):ne(e)).catch(function(e){throw e.response&&e.response.body&&e.response.body.errors,e}).finally(function(){!1})}().then(function(e){de(),a.props.history.replace("/article/".concat(e.slug))})},a.state={tagInput:""},Object(v.a)(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){me(this.props.match.params.slug)}},{key:"componentDidMount",value:function(){fe()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.slug!==e.match.params.slug&&(me(this.props.match.params.slug),fe())}},{key:"render",value:function(){var e=this,t=this.inProgressRemoveTag,a=this.editorErrors,n=this.title,r=this.description,c=this.body,l=this.tagList;return i.a.createElement("div",{className:"editor-page"},i.a.createElement("div",{className:"container page"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},i.a.createElement(ie,{errors:a}),i.a.createElement("form",null,i.a.createElement("fieldset",null,i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Article Title",value:n,onChange:this.changeTitle,disabled:t})),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control",type:"text",placeholder:"What's this article about?",value:r,onChange:this.changeDescription,disabled:t})),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("textarea",{className:"form-control",rows:"8",placeholder:"Write your article (in markdown)",value:c,onChange:this.changeBody,disabled:t})),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter tags",value:this.state.tagInput,onChange:this.changeTagInput,onBlur:this.handleAddTag,onKeyDown:this.handleTagInputKeyDown,disabled:t}),i.a.createElement("div",{className:"tag-list"},l.map(function(t){return i.a.createElement("span",{className:"tag-default tag-pill",key:t},i.a.createElement("i",{className:"ion-close-round",onClick:function(){return e.handleRemoveTag(t)}}),t)}))),i.a.createElement("button",{className:"btn btn-lg pull-xs-right btn-primary",type:"button",disabled:t,onClick:this.submitForm},"Publish Article")))))))}}]),t}(i.a.Component))||le,Ee=function(e){var t=e.appName;return e.token?null:i.a.createElement("div",{className:"banner"},i.a.createElement("div",{className:"container"},i.a.createElement("h1",{className:"logo-font"},t.toLowerCase()),i.a.createElement("p",null,"A place to share your knowledge.")))},je=a(19),Oe=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClickFavorite=function(e){e.preventDefault();var t=a.props,n=t.ah,r=t.article;r.favorited?n.unmakeFavorite(r.slug):n.makeFavorite(r.slug)},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.article,t=e.favorited?"btn btn-sm btn-primary":"btn btn-sm btn-outline-primary";return i.a.createElement("div",{className:"article-preview"},i.a.createElement("div",{className:"article-meta"},i.a.createElement(s.b,{to:"/@".concat(e.author.username)},i.a.createElement("img",{src:e.author.image,alt:""})),i.a.createElement("div",{className:"info"},i.a.createElement(s.b,{className:"author",to:"/@".concat(e.author.username)},e.author.username),i.a.createElement("span",{className:"date"},new Date(e.createdAt).toDateString())),i.a.createElement("div",{className:"pull-xs-right"},i.a.createElement("button",{className:t,onClick:this.handleClickFavorite},i.a.createElement("i",{className:"ion-heart"})," ",e.favoritesCount))),i.a.createElement(s.b,{to:"/article/".concat(e.slug),className:"preview-link"},i.a.createElement("h1",null,e.title),i.a.createElement("p",null,e.description),i.a.createElement("span",null,"Read more..."),i.a.createElement("ul",{className:"tag-list"},e.tagList.map(function(e){return i.a.createElement("li",{className:"tag-default tag-pill tag-outline",key:e},e)}))))}}]),t}(i.a.Component),Ne=function(e){if(e.totalPagesCount<2)return null;for(var t=[],a=0;a<e.totalPagesCount;++a)t.push(a);return i.a.createElement("nav",null,i.a.createElement("ul",{className:"pagination"},t.map(function(t){var a=t===e.currentPage;return i.a.createElement("li",{className:a?"page-item active":"page-item",onClick:function(a){a.preventDefault(),e.onSetPage(t)},key:t.toString()},i.a.createElement("a",{className:"page-link",href:""},t+1))})))},ye=function(e){return e.loading&&0===e.articles.length?i.a.createElement(J,null):0===e.articles.length?i.a.createElement("div",{className:"article-preview"},"No articles are here... yet."):i.a.createElement("div",null,e.articles.map(function(t){return i.a.createElement(Oe,{ah:e.ah,article:t,key:t.slug})}),i.a.createElement(Ne,{onSetPage:e.onSetPage,totalPagesCount:e.totalPagesCount,currentPage:e.currentPage}))},we=a(24),Ce=function(e){return e.currentUser?i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.c,{className:"nav-link",isActive:function(e,t){return t.search.match("tab=feed")?1:0},to:{pathname:"/",search:"?tab=feed"}},"Your Feed")):null},ke=function(e){return i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.c,{className:"nav-link",isActive:function(e,t){return t.search.match(/tab=(feed|tag)/)?0:1},to:{pathname:"/",search:"?tab=all"}},"Global Feed"))},Ue=function(e){return e.tag?i.a.createElement("li",{className:"nav-item"},i.a.createElement("a",{href:"",className:"nav-link active"},i.a.createElement("i",{className:"ion-pound"})," ",e.tag)):null},Pe=Object(w.f)(pe=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleTabChange=function(e){a.props.location.query.tab!==e&&a.props.router.push(Object(je.a)({},a.props.location,{query:{tab:e}}))},a.handleSetPage=function(e){Q(e),$()},Object(v.a)(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){X(this.getPredicate())}},{key:"componentDidMount",value:function(){$()}},{key:"componentDidUpdate",value:function(e){this.getTab(this.props)===this.getTab(e)&&this.getTag(this.props)===this.getTag(e)||(X(this.getPredicate()),$())}},{key:"getTag",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return Object(we.parse)(e.location.search).tag||""}},{key:"getTab",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return Object(we.parse)(e.location.search).tab||"all"}},{key:"getPredicate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;switch(this.getTab(e)){case"feed":return{myFeed:!0};case"tag":return{tag:Object(we.parse)(e.location.search).tag};default:return{}}}},{key:"render",value:function(){var e=this.articles,t=this.isLoading,a=this.page,r=this.totalPagesCount,c=this.currentUser;return i.a.createElement("div",{className:"col-md-9"},i.a.createElement("div",{className:"feed-toggle"},i.a.createElement("ul",{className:"nav nav-pills outline-active"},i.a.createElement(Ce,{currentUser:c,tab:this.getTab()}),i.a.createElement(ke,{tab:this.getTab()}),i.a.createElement(Ue,{tag:Object(we.parse)(this.props.location.search).tag}))),i.a.createElement(ye,{ah:n,articles:e,loading:t,totalPagesCount:r,currentPage:a,onSetPage:this.handleSetPage}))}}]),t}(i.a.Component))||pe,Ae=function(e){var t=e.tags;return t?i.a.createElement("div",{className:"tag-list"},t.map(function(e){return i.a.createElement(s.b,{to:{pathname:"/",search:"?tab=tag&tag="+e},className:"tag-default tag-pill",key:e},e)})):i.a.createElement(J,null)},Se=Object(w.f)(he=function(e){function t(e){var a;return Object(f.a)(this,t),a=Object(p.a)(this,Object(h.a)(t).call(this,e)),Object(v.a)(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Object(j.d)(),Object(j.e)(),Object(j.b)()}},{key:"render",value:function(){var e=this.tags,t=this.token,a=this.appName;return i.a.createElement("div",{className:"home-page"},i.a.createElement(Ee,{token:t,appName:a}),i.a.createElement("div",{className:"container page"}," ",i.a.createElement("div",{className:"row"},i.a.createElement(Pe,null),i.a.createElement("div",{className:"col-md-3"},i.a.createElement("div",{className:"sidebar"},i.a.createElement("p",null,"Popular Tags"),i.a.createElement(Ae,{tags:e}))))))}}]),t}(i.a.Component))||he,xe=a(13),De=Object(w.f)(be=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleEmailChange=function(e){return Object(xe.e)(e.target.value)},a.handlePasswordChange=function(e){return Object(xe.f)(e.target.value)},a.handleSubmitForm=function(e){e.preventDefault(),Object(xe.a)().then(function(){return a.props.history.replace("/")})},Object(v.a)(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){Object(xe.d)()}},{key:"render",value:function(){var e=this.currentUser,t=this.lerrors,a=this.linProgress;return e||(e={}),i.a.createElement("div",{className:"auth-page"},i.a.createElement("div",{className:"container page"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},i.a.createElement("h1",{className:"text-xs-center"},"Sign In"),i.a.createElement("p",{className:"text-xs-center"},i.a.createElement(s.b,{to:"register"},"Need an account?")),i.a.createElement(ie,{errors:t}),i.a.createElement("form",{onSubmit:this.handleSubmitForm},i.a.createElement("fieldset",null,i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control form-control-lg",type:"email",placeholder:"Email",value:e.email,onChange:this.handleEmailChange})),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",value:e.password,onChange:this.handlePasswordChange})),i.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:a},"Sign in")))))))}}]),t}(i.a.Component))||be,Te=void 0,Le=!1;function Fe(e){Le=!0,Object(v.c)("isLoadingProfile",Le),U.a.Profile.get(e).then(function(e){Te=e.profile,Object(v.c)("profile",Te)}).finally(function(){Le=!1,Object(v.c)("isLoadingProfile",Le)})}var Ie,Me,Re,Be,We,He,Je,Ke,qe,ze,Ye=function(e){return e.isUser?i.a.createElement(s.b,{to:"/settings",className:"btn btn-sm btn-outline-secondary action-btn"},i.a.createElement("i",{className:"ion-gear-a"})," Edit Profile Settings"):null},_e=function(e){if(e.isUser)return null;var t="btn btn-sm action-btn";e.following?t+=" btn-secondary":t+=" btn-outline-secondary";return i.a.createElement("button",{className:t,onClick:function(t){t.preventDefault(),e.following?e.unfollow(e.username):e.follow(e.username)}},i.a.createElement("i",{className:"ion-plus-round"}),"\xa0",e.following?"Unfollow":"Follow"," ",e.username)},Ge=Object(w.f)(ge=function(e){function t(e){var a;return Object(f.a)(this,t),console.log("profile props",e),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleFollow=function(){Object(v.b)("currentUser")?(setcfg({trace:!0}),Te&&!Te.following&&(Te.following=!0,Object(v.c)("profile",Te),U.a.Profile.follow(Te.username).catch(function(){Te.following=!1,Object(v.c)("profile",Te)}))):a.props.history.replace("/register")},a.handleUnfollow=function(){Te&&Te.following&&(Te.following=!1,Object(v.c)("profile",Te),U.a.Profile.unfollow(Te.username).catch(function(){Te.following=!0,Object(v.c)("profile",Te)}))},a.handleSetPage=function(e){Q(e),$()},Object(v.a)(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){X(this.getPredicate())}},{key:"componentDidMount",value:function(){Fe(this.props.match.params.username),$()}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&(Fe(this.props.match.params.username),X(this.getPredicate()),$())}},{key:"getTab",value:function(){return/\/favorites/.test(this.props.location.pathname)?"favorites":"all"}},{key:"getPredicate",value:function(){switch(this.getTab()){case"favorites":return{favoritedBy:this.props.match.params.username};default:return{author:this.props.match.params.username}}}},{key:"renderTabs",value:function(){var e=this.profile;return i.a.createElement("ul",{className:"nav nav-pills outline-active"},i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.c,{className:"nav-link",isActive:function(e,t){return t.pathname.match("/favorites")?0:1},to:"/@".concat(e.username)},"My Articles")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.c,{className:"nav-link",to:"/@".concat(e.username,"/favorites")},"Favorited Articles")))}},{key:"render",value:function(){var e=this.totalPagesCount,t=this.articles,a=this.isArticlesLoading,n=this.profile,r=this.isLoadingProfile,c=this.currentUser;if(r&&!n)return i.a.createElement(J,null);if(!n)return i.a.createElement(W,{message:"Can't load profile"});var l=c&&n.username===c.username;return i.a.createElement("div",{className:"profile-page"},i.a.createElement("div",{className:"user-info"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},i.a.createElement("img",{src:n.image,className:"user-img",alt:""}),i.a.createElement("h4",null,n.username),i.a.createElement("p",null,n.bio),i.a.createElement(Ye,{isUser:l}),i.a.createElement(_e,{isUser:l,username:n.username,following:n.following,follow:this.handleFollow,unfollow:this.handleUnfollow}))))),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},i.a.createElement("div",{className:"articles-toggle"},this.renderTabs()),i.a.createElement(ye,{articles:t,totalPagesCount:e,onSetPage:this.handleSetPage,loading:a})))))}}]),t}(i.a.Component))||ge,Ve=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleUsernameChange=function(e){return Object(xe.g)(e.target.value)},a.handleEmailChange=function(e){return Object(xe.e)(e.target.value)},a.handlePasswordChange=function(e){return Object(xe.f)(e.target.value)},a.handleSubmitForm=function(e){e.preventDefault(),Object(xe.c)().then(function(){return a.props.history.replace("/")})},Object(v.a)(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){Object(xe.d)()}},{key:"render",value:function(){var e=this.currentUser,t=this.rerrors,a=this.rinProgress;return e||(e={}),i.a.createElement("div",{className:"auth-page"},i.a.createElement("div",{className:"container page"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},i.a.createElement("h1",{className:"text-xs-center"},"Sign Up"),i.a.createElement("p",{className:"text-xs-center"},i.a.createElement(s.b,{to:"login"},"Have an account?")),i.a.createElement(ie,{errors:t}),i.a.createElement("form",{onSubmit:this.handleSubmitForm},i.a.createElement("fieldset",null,i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Username",value:e.username,onChange:this.handleUsernameChange})),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control form-control-lg",type:"email",placeholder:"Email",value:e.email,onChange:this.handleEmailChange})),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",value:e.password,onChange:this.handlePasswordChange})),i.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:a},"Sign in")))))))}}]),t}(i.a.Component),Ze=a(3),Qe=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={image:"",username:"",bio:"",email:"",password:""},Object(v.a)(Object(b.a)(a)),a.updateState=function(e){return function(t){var n=a.state,r=Object.assign({},n,Object(Ze.a)({},e,t.target.value));a.setState(r)}},a.submitForm=function(e){e.preventDefault();var t=Object.assign({},a.state);t.password||delete t.password,a.props.onSubmitForm(t)},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){this.currentUser&&Object.assign(this.state,{image:this.currentUser.image||"",username:this.currentUser.username,bio:this.currentUser.bio||"",email:this.currentUser.email})}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.submitForm},i.a.createElement("fieldset",null,i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control",type:"text",placeholder:"URL of profile picture",value:this.state.image,onChange:this.updateState("image")})),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Username",value:this.state.username,onChange:this.updateState("username")})),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("textarea",{className:"form-control form-control-lg",rows:"8",placeholder:"Short bio about you",value:this.state.bio,onChange:this.updateState("bio")})),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control form-control-lg",type:"email",placeholder:"Email",value:this.state.email,onChange:this.updateState("email")})),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"New Password",value:this.state.password,onChange:this.updateState("password")})),i.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:this.state.updatingUser},"Update Settings")))}}]),t}(i.a.Component),Xe=Object(w.f)(Ie=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleClickLogout=function(){return xe.b().then(function(){return a.props.history.replace("/")})},Object(v.a)(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.updatingUserErrors,t=this.currentUser;return i.a.createElement("div",{className:"settings-page"},i.a.createElement("div",{className:"container page"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},i.a.createElement("h1",{className:"text-xs-center"},"Your Settings"),i.a.createElement(ie,{errors:e}),i.a.createElement(Qe,{currentUser:t,onSubmitForm:function(e){return E.c(e)}}),i.a.createElement("hr",null),i.a.createElement("button",{className:"btn btn-outline-danger",onClick:this.handleClickLogout},"Or click here to logout.")))))}}]),t}(i.a.Component))||Ie,$e=Object(w.f)(Me=function(e){function t(e){var a;return Object(f.a)(this,t),a=Object(p.a)(this,Object(h.a)(t).call(this,e)),Object(v.a)(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){j.f||Object(j.c)()}},{key:"componentDidMount",value:function(){j.f&&Object(E.b)().finally(function(){return Object(j.c)()})}},{key:"render",value:function(){return j.a?i.a.createElement("div",null,i.a.createElement(y,null),i.a.createElement(w.c,null,i.a.createElement(w.a,{path:"/login",component:De}),i.a.createElement(w.a,{path:"/register",component:Ve}),i.a.createElement(w.a,{path:"/editor/:slug?",component:ve}),i.a.createElement(w.a,{path:"/article/:id",component:oe}),i.a.createElement(w.a,{path:"/settings",component:Xe}),i.a.createElement(w.a,{path:"/@:username",component:Ge}),i.a.createElement(w.a,{path:"/@:username/favorites",component:Ge}),i.a.createElement(w.a,{path:"/",component:Se}))):i.a.createElement(y,null)}}]),t}(i.a.Component))||Me,et={appLoaded:null},tt=Object(Ze.a)({appName:"app"},"currentUser",null),at={token:null,tags:null,appName:"app"},nt=(Re={},Object(Ze.a)(Re,"currentUser",null),Object(Ze.a)(Re,"lerrors",null),Object(Ze.a)(Re,"linProgress",null),Re),rt=(Be={},Object(Ze.a)(Be,"currentUser",null),Object(Ze.a)(Be,"rerrors",null),Object(Ze.a)(Be,"rinProgress",null),Be),ct=(We={},Object(Ze.a)(We,"currentUser",null),Object(Ze.a)(We,"articles",[]),Object(Ze.a)(We,"profile",null),Object(Ze.a)(We,"isArticlesLoading",null),Object(Ze.a)(We,"isLoadingProfile",null),Object(Ze.a)(We,"totalPagesCount",0),We),lt=(He={},Object(Ze.a)(He,"currentUser",null),Object(Ze.a)(He,"isArticleLoading",null),Object(Ze.a)(He,"comments",[]),Object(Ze.a)(He,"commentError",null),He),ot=(Je={},Object(Ze.a)(Je,"currentUser",null),Object(Ze.a)(Je,"updatingUserErrors",null),Je),it=(Ke={},Object(Ze.a)(Ke,"currentUser",null),Object(Ze.a)(Ke,"updatingUser",null),Ke),st=(qe={},Object(Ze.a)(qe,"currentUser",null),Object(Ze.a)(qe,"articles",[]),Object(Ze.a)(qe,"isLoading",null),Object(Ze.a)(qe,"page",0),Object(Ze.a)(qe,"totalPagesCount",0),Object(Ze.a)(qe,"predicate",null),qe),ut={inProgressRemoveTag:null,editorErrors:null,title:"",description:"",body:"",tagList:[]},mt=(ze={},Object(Ze.a)(ze,"currentUser",null),Object(Ze.a)(ze,"isCreatingComment",null),ze),ft=Object(Ze.a)({},"currentUser",null);Object(v.d)({framework:"React",debug:!0,bindings:r}),m.a.shim(),l.a.render(i.a.createElement(s.a,null,i.a.createElement($e,null)),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.8064f4c7.chunk.js.map